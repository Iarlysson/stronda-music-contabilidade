<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stronda Music</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="data:,">

</head>
<body>

<!-- TELA LOGIN (aparece primeiro) -->
<div id="telaLogin" class="box">
  <h2 id="tituloLogin" style="margin-top:0;">ğŸ¶ Stronda Music</h2>
  <p id="acessoLogin" style="margin:0 0 14px;">ğŸ” Acesso</p>

  <label>Tipo de acesso</label>
  <select id="tipoLogin">
    <option value="ADMIN">Administrador</option>
    <option value="COLAB">Colaborador</option>
  </select>

  <div id="formLogin" autocomplete="off">

    <label>UsuÃ¡rio</label>
    <input id="loginUser"
           type="text"
           autocomplete="off"
           autocapitalize="none"
           spellcheck="false"
           placeholder="Ex: admin" />

    <label>Senha</label>
    <div class="senha-wrapper">
      <input id="loginSenha" type="password" placeholder="Senha">
      <button type="button" class="btn-olho" onclick="toggleSenha('loginSenha', this)">ğŸ‘ï¸</button>
    </div>

    <button id="btnEntrar" type="button" onclick="entrarLogin(document.getElementById('tipoLogin').value)">Entrar</button>


    <hr style="opacity:.2; margin:16px 0;">

    <h3 style="margin:0 0 10px;">ğŸ›  Registrar Defeito Jukebox</h3>

<label>Empresa</label>
<select id="pubOcEmpresa" style="width:100%;">
  <option value="">Selecione...</option>
</select>

<label>NÃºmero da MÃ¡quina</label>
<input id="pubOcNum" disabled />

<label>Nome do Estabelecimento</label>
<input id="pubOcEstab" type="text" readonly>

    <label>ObservaÃ§Ãµes</label>
    <textarea id="pubOcObs" rows="4"
      style="width:100%; padding:10px; border-radius:10px; border:none; margin-top:6px;"></textarea>

    <button type="button" onclick="salvarOcorrenciaPublica()">Enviar OcorrÃªncia</button>
  </div><!-- âœ… FECHA formLogin -->

</div><!-- âœ… FECHA telaLogin -->

<!-- APP (fica escondido atÃ© logar) -->
<div id="app" class="escondido">


    <h1 id="tituloApp">ğŸ¶ Stronda Music</h1>
    <p id="subtitulo">Sistema de Controle</p>


    <!-- MENU -->
<div id="menu" class="menu">
  <button onclick="abrir('acerto')">âš¡ Acerto</button>
  <button onclick="abrir('status')">ğŸŸ¢ Status</button>
  <button onclick="abrir('cadastro')">â• Cadastro de MÃ¡quina</button>
  <button onclick="abrir('clientes')">ğŸ‘¥ MÃ¡quinas Cadastradas</button>
  <button id="btnOcorrencias" onclick="abrir('ocorrencias')">ğŸ›  OcorrÃªncias</button>
  <button id="btnCreditosRemotos" onclick="abrir('creditosRemotos')">
  ğŸ’³ CrÃ©ditos Remotos
</button>
  <button onclick="abrirHistoricoVendas()">ğŸ“Š Fechamento de Caixa</button>
  <button id="btnSelecionarEmpresa" onclick="abrir('selecionarEmpresa')">
  ğŸ¢ Selecionar Empresa
</button>
  <button onclick="trocarSenhaAdmin()">ğŸ” Trocar Senha (ADMIN)</button>
  <button onclick="abrir('colaboradores')">ğŸ‘¤ Colaboradores</button>
  <button onclick="sair()">ğŸšª Sair</button>
</div>


    <!-- ACERTO -->
<div id="acerto" class="box escondido" autocomplete="off">
  <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar</button>
  <h2>âš¡ Acerto RÃ¡pido</h2>

  <label>NÃºmero da Jukebox</label>
  <input type="text" id="numAcerto" autocomplete="off" oninput="autoPorNumero()">

  <label>Nome do Estabelecimento</label>
  <input type="text" id="estabAcerto" autocomplete="off" oninput="autoPorEstab()">

  <div class="linha-relogio">
    <div class="campo-relogio">
      <label>RelÃ³gio Anterior</label>
      <input type="number" id="relogioAnterior" autocomplete="off" oninput="atualizarPreviewAcerto()">
    </div>
    <div class="campo-relogio">
      <label>RelÃ³gio Atual</label>
      <input type="number" id="relogioAtual" autocomplete="off" oninput="atualizarPreviewAcerto()">
    </div>
  </div>

  <label>Valor Pix (empresa)</label>
  <input type="number" id="pix" autocomplete="off" oninput="atualizarPreviewAcerto()">

  <label>Valor em Dinheiro</label>
  <input type="number" id="dinheiro" autocomplete="off" oninput="atualizarPreviewAcerto()">

  <label>% do Cliente</label>
  <input type="number" id="porcentagem" autocomplete="off" oninput="atualizarPreviewAcerto()">

  <p id="resultado"></p>

  <button type="button" onclick="salvarAcerto()">Salvar Acerto</button>
</div>

    <!-- STATUS -->
    <div id="status" class="box escondido">
      <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar</button>
      <h2>Status de Acertos</h2>
      <ul id="listaStatus"></ul>
    </div>

    <!-- DETALHES DO CLIENTE -->
    <div id="detalhesStatus" class="box escondido">
      <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar</button>
      <h2 id="tituloDetalhes">ğŸ“Š Acertos do MÃªs</h2>
      <ul id="listaDetalhes"></ul>
      <p id="resumoDetalhes"></p>
    </div>

    <!-- CADASTRO -->
    <div id="cadastro" class="box escondido">
      <h2>â• Cadastro de MÃ¡quina</h2>

      <label>NÃºmero da Jukebox</label>
      <input id="numMaquina" type="text">

      <label>Nome do Estabelecimento</label>
      <input id="nomeEstab" type="text">

      <label>Nome do Cliente</label>
      <input id="nomeCliente" type="text">

      <label>Telefone (com DDD)</label>
      <input id="foneCliente" type="text" placeholder="(61) 99999-9999" inputmode="numeric">

      <label>EndereÃ§o / LocalizaÃ§Ã£o</label>
      <input id="endereco" type="text">

      <button type="button" onclick="pegarLocalizacaoCadastro()">ğŸ“ Pegar LocalizaÃ§Ã£o (GPS)</button>

      <label>% base do cliente</label>
      <input id="porcBase" type="number">

      <button onclick="salvarMaquina()">Salvar MÃ¡quina</button>
      <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar ao Menu</button>
    </div>

    <!-- CLIENTES -->
    <div id="clientes" class="box escondido">
      <h2>ğŸ‘¥ MÃ¡quinas Cadastradas</h2>
      <ul id="listaMaquinas"></ul>
      <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar</button>
    </div>

    <!-- DETALHE DA MÃQUINA -->
    <div id="detalheMaquina" class="box escondido">
      <h2 id="tituloMaquina">ğŸ”§ MÃ¡quina</h2>

      <label>NÃºmero (JB)</label>
      <input id="detNumero" type="text" oninput="carregarMaquinaPorNumero()">

      <label>Nome do Estabelecimento</label>
      <input id="detEstab" type="text">

      <label>Nome do Cliente</label>
      <input id="detCliente" type="text">

      <label>Telefone (com DDD)</label>
      <input id="detFone" type="text" placeholder="(61) 99999-9999" inputmode="numeric">

      <div class="acoes-telefone">
        <button type="button" onclick="ligarTelefone()">ğŸ“ Ligar</button>
        <button type="button" onclick="abrirWhats(event)">ğŸ’¬ WhatsApp</button>

      </div>

      <label>EndereÃ§o / LocalizaÃ§Ã£o</label>
      <input id="detEndereco" type="text">

      <button type="button" onclick="atualizarLocalizacaoDetalhe()">
        ğŸ“ Buscar LocalizaÃ§Ã£o (GPS) (ADMIN)
      </button>

      <label>Status</label>
      <select id="detStatus">
        <option value="ALUGADA">ALUGADA</option>
        <option value="DEPOSITO">DEPÃ“SITO</option>
      </select>

      <button id="btnSalvar" onclick="salvarAlteracoesMaquina()">Salvar AlteraÃ§Ãµes (ADMIN)</button>
      <button id="btnApagar" class="btn-danger" onclick="apagarMaquina()">ğŸ—‘ Apagar MÃ¡quina (ADMIN)</button>

      <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar ao Menu</button>
    </div>



     <!-- COLABORADORES (ADMIN) -->
<div id="colaboradores" class="box escondido">
  <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar</button>
  <h2>ğŸ‘¤ Colaboradores (ADMIN)</h2>

  <label>Nome do Colaborador</label>
  <input id="colabNome" type="text" placeholder="Ex: JOÃƒO SILVA" />

  <label>WhatsApp do colaborador (DDD + nÃºmero)</label>
<input id="colabWhats" type="text" placeholder="Ex: 61993631181" inputmode="numeric" autocomplete="off" />

  <label>UsuÃ¡rio (login)</label>
<input id="colabUser" type="text" placeholder="Ex: joao" />

<label>Senha do colaborador</label>
<div class="senha-wrapper">
  <input id="colabSenha" type="password" placeholder="Ex: 1234" autocomplete="new-password">
  <button type="button" class="btn-olho" onclick="toggleSenha('colabSenha', this)">ğŸ‘ï¸</button>
</div>

<!-- empresa atual (fica invisÃ­vel) -->
<input id="empresaIdAtual" type="hidden" value="">

  <button type="button" onclick="adicionarColaborador()">â• Adicionar Colaborador</button>

  <hr style="opacity:.2; margin:16px 0;">

  <h3 style="margin:0 0 10px;">ğŸ“‹ Lista de Colaboradores</h3>
  <ul id="listaColabs"></ul>
</div>

<!-- SELECIONAR EMPRESA (ADMIN) -->
<!-- SELECIONAR EMPRESA (ADMIN) -->
<div id="selecionarEmpresa" class="box escondido">
  <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar</button>
  <h2>ğŸ¢ Empresas</h2>

  
  <!-- PRÃ‰-CADASTRO (completo) -->
  <div style="background:#0f172a; padding:12px; border-radius:12px; margin:10px 0;">
    <h3 style="margin:0 0 10px;">â• PrÃ©-cadastro de empresa</h3>

    <label>Empresa ID (ex: STRONDA2) *</label>
    <input id="pcEmpId" placeholder="EX: EMPRESA2" />

    <label>Nome da empresa *</label>
    <input id="pcNomeEmpresa" placeholder="EX: Stronda Music LTDA" />

    <label>CPF ou CNPJ (opcional)</label>
    <input id="pcDoc" placeholder="Opcional (CPF 11 / CNPJ 14)" />

    <label>Nome do ADMIN *</label>
    <input id="pcAdminNome" placeholder="EX: Iarlysson" />

    <label>UsuÃ¡rio do ADMIN *</label>
    <input id="pcAdminUser" placeholder="EX: admin_empresa2" />

    <label>Senha do ADMIN *</label>
    <input id="pcAdminSenha" type="password" placeholder="MÃ­nimo 4 caracteres" />

    <label>Dia de pagamento (1 a 28) *</label>
    <input id="pcDiaPagamento" type="number" min="1" max="28" value="5" />

    <button id="btnCadastrarEmpresa" type="button" onclick="preCadastrarEmpresa()"
  style="margin-top:10px; width:100%; padding:12px; border-radius:12px; border:none; font-weight:900; cursor:pointer;">
  âœ… Cadastrar Empresa
</button>

  </div>

  <h3 style="margin:0 0 10px;">ğŸ“‹ Empresas cadastradas</h3>
  <ul id="listaEmpresas"></ul>
</div>



    <!-- OCORRÃŠNCIAS -->
    <div id="ocorrencias" class="box escondido">
      <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar</button>

      <h2>ğŸ›  OcorrÃªncias</h2>

      
      <label>NÃºmero da MÃ¡quina</label>
      <input id="ocNum" type="text" oninput="ocAutoPorNumero()">

      <label>Nome do Estabelecimento</label>
      <input id="ocEstab" type="text" readonly>

      <label>ObservaÃ§Ãµes</label>
      <textarea id="ocObs" rows="4"
        style="width:100%; padding:10px; border-radius:10px; border:none; margin-top:6px;"></textarea>

      <button type="button" onclick="salvarOcorrencia()">Salvar OcorrÃªncia</button>

      <hr style="opacity:.2; margin:16px 0;">

      <h3 style="margin:0 0 10px;">ğŸ“‹ Pendentes</h3>
      <ul id="listaOcorrencias"></ul>
    </div>


  <div id="creditosRemotos" class="box escondido">
  <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar</button>
  <h2>ğŸ’³ CrÃ©ditos Remotos</h2>

  <label>NÂº da MÃ¡quina</label>
  <input id="crNum" type="text" placeholder="Ex: 12" oninput="crAutoPorNumero()" />

  <label>Estabelecimento</label>
  <input id="crEstab" type="text" disabled />

  <p id="crInfo" style="margin:10px 0; opacity:.9;"></p>

  <label>Valor do crÃ©dito (R$)</label>
  <input id="crValor" type="number" step="0.01" placeholder="Ex: 50" />

  <button type="button" onclick="salvarCreditoRemoto()">âœ… LanÃ§ar CrÃ©dito</button>
</div>




    <!-- LOCALIZAÃ‡ÃƒO -->
<div id="localizacao" class="box escondido">
  <button class="voltar btn-voltar" onclick="voltar()">â¬… Voltar</button>
  <h2>ğŸ“ LocalizaÃ§Ã£o das MÃ¡quinas</h2>

  <p style="opacity:.9; margin-top:0;">
    Clique em uma mÃ¡quina abaixo para ver o painel e abrir no Google Maps.
  </p>

  <h3 style="margin:10px 0 8px;">ğŸ“‹ Locais com GPS salvo</h3>
  <ul id="listaLocais"></ul>

  <div id="painelLocal" style="margin-top:12px;"></div>
</div>

    <!-- HISTÃ“RICO DE VENDAS (AGORA NO LUGAR CERTO) -->
    <div class="box escondido" id="historicoVendas">
      <h2 style="margin-top:0;">ğŸ“Š HistÃ³rico de Vendas</h2>

      <label>Data Inicial</label>
      <input type="date" id="hvInicio" style="width:100%; padding:10px; border-radius:10px; border:none; margin-bottom:10px;">

      <label>Data Final</label>
      <input type="date" id="hvFim" style="width:100%; padding:10px; border-radius:10px; border:none; margin-bottom:10px;">

      <div style="display:flex; gap:10px; flex-wrap:wrap; margin:10px 0;">
        <button type="button" onclick="renderHistoricoVendas(false)" style="flex:1;">
          ğŸ” Ver Totais do PerÃ­odo
        </button>
        <button type="button" onclick="renderHistoricoVendas(true)" style="flex:1;">
          ğŸ“… Ver DiÃ¡rio
        </button>
      </div>

      <div id="hvResultado" style="margin-top:12px;"></div>

      <button type="button" onclick="voltar()" style="margin-top:14px;">
        â† Voltar ao Menu
      </button>
    </div>


      </div><!-- /#app -->



<!-- Seu sistema -->
<script type="module" src="./script.js"></script>



</body>
</html>


